{% extends "base.html" %}

{% block content %}
<div class="container">
    <!-- Hero Section -->
    <div class="row mb-5">
        <div class="col-lg-8 mx-auto text-center">
            <h1 class="display-4 fw-bold text-primary mb-4">
                <i class="fas fa-robot me-3"></i>
                AI 智能客服平台
            </h1>
            <p class="lead mb-4">
                基於 FastAPI 和先進 AI 技術打造的企業級客服解決方案
            </p>
            <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                <a href="/chat" class="btn btn-primary btn-lg me-md-2">
                    <i class="fas fa-comments me-2"></i>開始對話
                </a>
                <a href="/docs" class="btn btn-outline-primary btn-lg">
                    <i class="fas fa-book me-2"></i>API 文檔
                </a>
            </div>
        </div>
    </div>

    <!-- Features Section -->
    <div class="row mb-5">
        <div class="col-12">
            <h2 class="text-center mb-5">核心功能</h2>
        </div>
        
        <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body text-center">
                    <div class="mb-3">
                        <i class="fas fa-brain fa-3x text-primary"></i>
                    </div>
                    <h5 class="card-title">智能對話</h5>
                    <p class="card-text">
                        整合 Ollama qwen3:14b 模型，提供自然流暢的 AI 對話體驗
                    </p>
                </div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body text-center">
                    <div class="mb-3">
                        <i class="fas fa-ticket-alt fa-3x text-success"></i>
                    </div>
                    <h5 class="card-title">工單管理</h5>
                    <p class="card-text">
                        完整的工單生命週期管理，支援自動分配和狀態追蹤
                    </p>
                </div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body text-center">
                    <div class="mb-3">
                        <i class="fas fa-search fa-3x text-info"></i>
                    </div>
                    <h5 class="card-title">知識庫搜索</h5>
                    <p class="card-text">
                        基於 Elasticsearch 的全文搜索，快速找到相關解決方案
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Technology Stack -->
    <div class="row mb-5">
        <div class="col-12">
            <h2 class="text-center mb-5">技術架構</h2>
        </div>
        
        <div class="col-lg-6 mb-4">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="fas fa-server me-2"></i>後端技術</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="fab fa-python text-primary me-2"></i>
                            <strong>FastAPI</strong> - 高性能異步 Web 框架
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-database text-success me-2"></i>
                            <strong>PostgreSQL</strong> - 主資料庫
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-memory text-danger me-2"></i>
                            <strong>Redis</strong> - 緩存和會話存儲
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-search text-warning me-2"></i>
                            <strong>Elasticsearch</strong> - 全文搜索引擎
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-robot text-info me-2"></i>
                            <strong>Ollama</strong> - AI 模型服務
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6 mb-4">
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="fas fa-desktop me-2"></i>前端技術</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li class="mb-2">
                            <i class="fab fa-html5 text-danger me-2"></i>
                            <strong>HTML5</strong> - 現代網頁標準
                        </li>
                        <li class="mb-2">
                            <i class="fab fa-css3-alt text-primary me-2"></i>
                            <strong>CSS3</strong> - 樣式設計
                        </li>
                        <li class="mb-2">
                            <i class="fab fa-js-square text-warning me-2"></i>
                            <strong>JavaScript</strong> - 互動功能
                        </li>
                        <li class="mb-2">
                            <i class="fab fa-bootstrap text-purple me-2"></i>
                            <strong>Bootstrap 5</strong> - 響應式 UI 框架
                        </li>
                        <li class="mb-2">
                            <i class="fas fa-plug text-success me-2"></i>
                            <strong>WebSocket</strong> - 實時通信
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Status Section -->
    <div class="row">
        <div class="col-12">
            <div class="card bg-light">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-heartbeat me-2"></i>系統狀態
                    </h5>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="text-center">
                                <div id="apiStatus" class="badge bg-secondary">檢查中...</div>
                                <div class="mt-1">API 服務</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                <div id="aiStatus" class="badge bg-secondary">檢查中...</div>
                                <div class="mt-1">AI 服務</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                <div id="dbStatus" class="badge bg-secondary">檢查中...</div>
                                <div class="mt-1">資料庫</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center">
                                <div id="cacheStatus" class="badge bg-secondary">檢查中...</div>
                                <div class="mt-1">緩存</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// 檢查系統狀態
async function checkSystemStatus() {
    try {
        const response = await fetch('/health');
        const data = await response.json();
        
        // 更新狀態顯示
        document.getElementById('apiStatus').textContent = '正常';
        document.getElementById('apiStatus').className = 'badge bg-success';
        
        if (data.ai_service === 'online') {
            document.getElementById('aiStatus').textContent = '正常';
            document.getElementById('aiStatus').className = 'badge bg-success';
        } else {
            document.getElementById('aiStatus').textContent = '離線';
            document.getElementById('aiStatus').className = 'badge bg-warning';
        }
        
        // 模擬其他服務狀態
        document.getElementById('dbStatus').textContent = '正常';
        document.getElementById('dbStatus').className = 'badge bg-success';
        
        document.getElementById('cacheStatus').textContent = '正常';
        document.getElementById('cacheStatus').className = 'badge bg-success';
        
    } catch (error) {
        console.error('狀態檢查失敗:', error);
        document.getElementById('apiStatus').textContent = '錯誤';
        document.getElementById('apiStatus').className = 'badge bg-danger';
    }
}

// 頁面載入時檢查狀態
document.addEventListener('DOMContentLoaded', checkSystemStatus);
</script>
{% endblock %}
